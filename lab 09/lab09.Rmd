---
title: "Lab 9"
date: "Math 241, Week 12"
output:
  html_document:
    df_print: paged
urlcolor: blue
---

```{r setup, include=FALSE}
# Do not modify this chunk.
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)


```


## Due: Monday, May 4th at 8:30am

Notes:

1. You should upload the final version of your app to your GitHub repo and the Reed Shiny Server.  And then fill out [this form](https://forms.gle/PndawcjwSHHCrWP26).
1. If you'd prefer to not upload your app to the Shiny Server, that is completely fine.  In that case, provide your Math 241 GitHub repo url on the form. 
1. You can work alone or with one other person.

 




## Goals of this lab

* In this lab, you (and your partner) will create an interactive web application with `shiny`.  


### App Guidelines


* The writing on the app should be fairly minimal.  
    + You should include a paragraph or so with a motivating question that the user explores with the app.  
    + Also make sure to link to the data source.

* Your app must include:
    + At least two inputs.
    + At least two outputs.
    

* There are lots of great examples of `shiny` apps [here](https://shiny.rstudio.com/gallery/).  

* Fill free to use a data source we have already used in this class.  
    + You can even take a smashing graph you've created in a previous lab and make it interactive.
    
```{r}
library(tidyverse)

# data 
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')


food_consumption2 <- food_consumption %>%
  mutate(food_group = fct_collapse(food_category, 
                                   Meat = c("Pork", "Beef", "Poultry", "Lamb & Goat"), 
                                   Animal_Products = c("Fish", "Milk - inc. cheese", "Eggs"), 
                                   Plant_Products = c("Rice", 
                                                      "Soybeans",
                                                      "Nuts inc. Peanut Butter",
                                                      "Wheat and Wheat Products"))) 


testy_test<- food_consumption2%>%
  group_by(country) %>%
  select(c(-food_category)) 
  

test<- food_consumption2 %>% 
  group_by(country) %>%
  mutate(total_consumption = sum(consumption), 
         total_emmission = sum(co2_emmission))


test <- test %>% pivot_wider(names_from = food_group, values_from = consumption) %>%
  select(c(-food_category))


test <- test %>% pivot_longer(cols = c(total_consumption, Animal_Products, Meat, Plant_Products), 
                              names_to = "food_group", 
                              values_to = "consumption")
 test <- test %>% filter(!is.na(consumption))


# static graph 


ggplot(food_consumption2, aes(x = country, y = consumption, fill = food_group))+ 
  geom_col()


```
